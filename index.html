<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <style>
        .monitor-item {
            margin: 10px;
            padding: 15px;
        }

        .status-number {
            font-weight: bold;
            font-size: 25px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row justify-content-between">

        <div class="col bg-dark text-white monitor-item">
            Current Clients:
            <div id="current_clients" class="text-center mt-5 status-number">0</div>
        </div>


        <div class="col bg-primary text-white monitor-item">
            Received Messages:
            <div id="received_messages" class="text-center mt-5 status-number">0</div>
        </div>


        <div class="col bg-success text-white monitor-item">
            All Connected Clients:
            <div id="all_connected_clients" class="text-center mt-5 status-number">0</div>
        </div>


        <div class="col bg-info text-white monitor-item">
            All Closed Clients:
            <div id="all_closed_client" class="text-center mt-5 status-number">0</div>
        </div>

    </div>

    <div class="row justify-content-between">

        <div class="col bg-dark text-white monitor-item">
            Database Connections:
            <div id="database_connection_count" class="text-center mt-5 status-number">0</div>
        </div>

    </div>
</div>




<script>
    // Function to update the content of the div elements
    function updateStatus() {
        // Make an HTTP GET request to your server
        axios.get('/status')
            .then(function (response) {
                // Update the content of the div elements with the received data
                document.getElementById('received_messages').innerHTML = response.data.received_messages;
                document.getElementById('current_clients').innerHTML = response.data.current_clients;
                document.getElementById('all_connected_clients').innerHTML = response.data.all_connected_clients;
                document.getElementById('all_closed_client').innerHTML = response.data.all_closed_client;
                document.getElementById('database_connection_count').innerHTML = response.data.database_connection_count;
            })
            .catch(function (error) {
                console.error('Error fetching status:', error);
            });
    }

    // Update the status initially and every 5 seconds (you can adjust the interval as needed)
    updateStatus();
    setInterval(updateStatus, 1000);
</script>


</body>
</html>
